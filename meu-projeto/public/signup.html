<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Document</title>
    <link rel="stylesheet" href="/meu-projeto/src/styles/style.css">
    
</head>
<body>

    
   <main>
    <div class="logomarca">
        <a href="index.html"><img src="images/IPHONES JL LOGO TRANSPARENTE.png" alt="Logo do site" width="400" height="400"></a>
    </div>
       
        <div class="form-group">
            <form id="cardform">

                <h2 >
                    CADASTRE-SE
                </h2><br>
                
                <label for="nome">Nome</label>
                <input type="text" id="nome" name="nome" placeholder="Digite seu nome" required ><br>
                <span id="nomeError" class="error"></span><br>


                <label for="telefone">Telefone</label>
                <input type="tel" id="telefone" name="telefone" placeholder="Digite seu telefone"  required><br>
                <span id="telefoneError" class="error"></span><br> 
                
          
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="Digite seu e-mail" required><br>
                <span id="emailError" class="error"></span><br>
           
           
                <label for="senha">Senha</label>
                <input type="password" id="senha" name="senha" placeholder="Digite sua senha" required><br>
                <span id="senhaError" class="error"></span><br>
                
                <button onclick="validarSalvar()" type="button" class="btnform">Enviar</button>
                <script>
                     function validarSalvar() {
                            // Limpar mensagens de erro
                            document.getElementById("nomeError").textContent = "";
                            document.getElementById("telefoneError").textContent = "";
                            document.getElementById("emailError").textContent = "";
                            document.getElementById("senhaError").textContent = "";

                            // Validar campos
                            let nome = document.getElementById("nome").value;
                            let telefone = document.getElementById("telefone").value;
                            let email = document.getElementById("email").value;
                            let senha = document.getElementById("senha").value;

                            let formValido = true;

                            if (nome === "") {
                                document.getElementById("nomeError").textContent = "Nome é obrigatório.";
                                formValido = false;
                            }

                            if (telefone === "") {
                                document.getElementById("telefoneError").textContent = "Telefone é obrigatório.";
                                formValido = false;
                            }

                            if (email === "") {
                                document.getElementById("emailError").textContent = "E-mail é obrigatório.";
                                formValido = false;
                            }

                            if (senha === "") {
                                document.getElementById("senhaError").textContent = "Senha é obrigatória.";
                                formValido = false;
                            }

                            // Salvar dados se o formulário for válido
                            if (formValido) {
                                salvar(nome, telefone, email, senha);
                            }
                            }

                            function salvar(nome, telefone, email, senha) {
                            const novoUsuario = {
                                email: email,
                                nome: nome,
                                telefone: telefone,
                                senha: senha
                            };

                            // Verifica se já existe um array no Local Storage
                            let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

                            // Verifica se o email já existe
                            const emailJaExiste = usuarios.some(usuario => usuario.email === email);

                            if (emailJaExiste) {
                                alert("Este email já está cadastrado.");
                                return;
                            }

                            // Adiciona o novo usuário ao array
                            usuarios.push(novoUsuario);

                            // Salva o array atualizado no Local Storage
                            localStorage.setItem("usuarios", JSON.stringify(usuarios));

                            alert("Dados salvos com sucesso!");
                            document.getElementById("cardform").reset();
                            }
                         
             </script>
                
            </form>
        </div>


   </main>

   <footer id="foot"> 
    <p>copy</p>
   </footer>
</body>
</html>